<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Linux on Dean&#39;s Blog</title>
    <link>https://treeboylife.com/categories/linux/</link>
    <description>Recent content in Linux on Dean&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 02 Aug 2021 12:35:18 +0800</lastBuildDate><atom:link href="https://treeboylife.com/categories/linux/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Iptables Port Forwarding Settings</title>
      <link>https://treeboylife.com/blog/iptables-port-forwarding-settings/</link>
      <pubDate>Mon, 02 Aug 2021 12:35:18 +0800</pubDate>
      
      <guid>https://treeboylife.com/blog/iptables-port-forwarding-settings/</guid>
      <description>Linux iptables转发 最近在使用Apsara专有云，但是其安全组策略有一些限制，原本我们需要使用A机器访问C机器，可惜目前A机器因为安全组策略的原因无法正常访问，但凑巧的是目前有一台中转节点B，A可以访问B，B也可以访问C
于是我想起了之前Linux用iptables做端口转发的，这边简单记录一下
示意图 目前简单的网络架构是这样子的
我们首先需要在服务器B上面开启端口转发功能，需要给sysctl.conf写入端口转发配置
net.ipv4.ip_forward=1 执行sysctl -p使其生效，最后配置iptables
iptables -t nat -A PREROUTING -p tcp --dport 8080 -j DNAT --to-destination 1.1.1.1:8080 iptables -t nat -A POSTROUTING -p tcp -d 1.1.1.1 --dport 8080 -j SNAT --to-source 192.168.2.1 这样子我们就可以服务器A访问服务器B的8080端口实现访问服务器C的8080端口效果</description>
    </item>
    
  </channel>
</rss>
